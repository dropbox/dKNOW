[package]
name = "sg"
version.workspace = true
edition.workspace = true
license.workspace = true
description = "SuperGrep - semantic code search CLI"

[[bin]]
name = "sg"
path = "src/main.rs"

[dependencies]
sg-core.workspace = true
sg-daemon.workspace = true

# CLI
clap.workspace = true
clap_complete.workspace = true

# Async runtime
tokio.workspace = true

# Serialization (for IPC)
serde.workspace = true
serde_json.workspace = true

# Utilities
anyhow.workspace = true
colored.workspace = true
directories.workspace = true
indicatif.workspace = true
tracing.workspace = true
tracing-subscriber.workspace = true
tempfile = "3"
regex.workspace = true
docling-backend.workspace = true
# Pure Rust PDF text extraction (fallback when docling fails)
pdf-extract.workspace = true

# CSV processing for bulk search
csv = "1.3"
atty = "0.2"

# OS-level operations for stderr suppression
libc = "0.2"

[features]
default = []
metal = ["sg-core/metal", "sg-daemon/metal"]
# ONNX Runtime backend for cross-platform inference
# Use: cargo build --features onnx
onnx = ["sg-core/onnx"]
# Document processing for PDF and other document formats
# Use: cargo build --features document-processing
document-processing = ["sg-core/document-processing"]
# CLIP model for image search
# Use: cargo build --features clip
clip = ["sg-core/clip"]
